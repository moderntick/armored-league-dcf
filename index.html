<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Armored League - DCF Financial Model</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 20px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(220,20,60,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        h1 {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #DC143C, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: #999;
            position: relative;
            z-index: 1;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 24px;
            background: #2d2d2d;
            border: 2px solid #DC143C;
            color: #fff;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            display: inline-block;
        }
        
        .nav-btn:hover {
            background: #DC143C;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(220,20,60,0.3);
        }
        
        .nav-btn.active {
            background: #DC143C;
            box-shadow: 0 0 20px rgba(220,20,60,0.5);
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .kpi-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(220,20,60,0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(220,20,60,0.3);
        }
        
        .kpi-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #DC143C;
            margin-bottom: 5px;
        }
        
        .kpi-label {
            font-size: 0.9rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .kpi-sublabel {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }
        
        .section {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(220,20,60,0.1);
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: #DC143C;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        th {
            background: rgba(220,20,60,0.1);
            font-weight: 600;
            color: #DC143C;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        tr:hover {
            background: rgba(220,20,60,0.05);
        }
        
        td.number {
            text-align: right;
            font-family: 'Monaco', 'Courier New', monospace;
        }
        
        .total-row {
            font-weight: bold;
            border-top: 2px solid #DC143C;
            background: rgba(220,20,60,0.05);
        }
        
        .subtotal-row {
            font-weight: 600;
            background: rgba(255,255,255,0.05);
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        .insight-box {
            background: rgba(220,20,60,0.1);
            border-left: 4px solid #DC143C;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .insight-box h3 {
            color: #DC143C;
            margin-bottom: 10px;
        }
        
        .parameters-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .parameter-group {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(220,20,60,0.2);
        }
        
        .parameter-group h4 {
            color: #DC143C;
            margin-bottom: 15px;
        }
        
        .parameter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .parameter label {
            color: #ccc;
            font-size: 0.9rem;
        }
        
        .parameter input {
            width: 120px;
            padding: 8px;
            background: #2d2d2d;
            border: 1px solid #DC143C;
            color: #fff;
            border-radius: 5px;
            text-align: right;
        }
        
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            margin-top: 60px;
        }
        
        .download-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background: linear-gradient(135deg, #DC143C, #ff6b6b);
            border: none;
            color: #fff;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(220,20,60,0.3);
            z-index: 1000;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220,20,60,0.4);
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .chart-grid { grid-template-columns: 1fr; }
            .parameters-grid { grid-template-columns: 1fr; }
            .kpi-value { font-size: 2rem; }
        }
        
        .positive { color: #00ff00; }
        .negative { color: #ff0000; }
        .neutral { color: #ffaa00; }
    </style>
</head>
<body>
    <button class="download-btn" onclick="downloadPDF()" id="downloadBtn">
        📥 Download DCF Model
    </button>
    
    <div class="container">
        <div class="header">
            <h1>THE ARMORED LEAGUE</h1>
            <div class="subtitle">Discounted Cash Flow Valuation Model</div>
        </div>
        
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="#" class="nav-btn active">DCF Model</a>
            <a href="financial-dashboard copy.html" class="nav-btn">Event Analytics</a>
            <a href="event-pnl copy.html" class="nav-btn">P&L Statement</a>
            <a href="Armored_league_pitchv2.html" class="nav-btn">Pitch Deck</a>
        </div>
        
        <!-- Key Valuation Metrics -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-value" id="enterpriseValue">$15.2M</div>
                <div class="kpi-label">Enterprise Value</div>
                <div class="kpi-sublabel" id="kpiDiscountRate">10% Discount Rate</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value" id="year5Revenue">$24.7M</div>
                <div class="kpi-label">Year 5 Revenue</div>
                <div class="kpi-sublabel" id="kpiEvents">50 events annually</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value" id="year5Ebitda">$8.6M</div>
                <div class="kpi-label">Year 5 EBITDA</div>
                <div class="kpi-sublabel" id="kpiEbitdaMargin">34.8% margin</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value" id="irr">127%</div>
                <div class="kpi-label">5-Year IRR</div>
                <div class="kpi-sublabel">$1M initial investment</div>
            </div>
        </div>
        
        <!-- Model Parameters -->
        <div class="section">
            <h2 class="section-title">📊 Model Parameters</h2>
            <div class="parameters-grid">
                <div class="parameter-group">
                    <h4>Event Economics (Current)</h4>
                    <div class="parameter">
                        <label>Average Ticket Price:</label>
                        <input type="text" id="avgTicketPrice" value="$51.67" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Tickets per Event:</label>
                        <input type="number" id="ticketsPerEvent" value="422" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Event Cost:</label>
                        <input type="text" id="eventCost" value="$13,005" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Net Margin:</label>
                        <input type="text" id="netMargin" value="19.3%" readonly>
                    </div>
                </div>
                
                <div class="parameter-group">
                    <h4>Growth Assumptions</h4>
                    <div class="parameter">
                        <label>Events Year 1:</label>
                        <input type="number" id="eventsYear1" value="15" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Annual Event Growth:</label>
                        <input type="text" id="eventGrowth" value="50%" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Ticket Price Growth:</label>
                        <input type="text" id="priceGrowth" value="10%" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Attendance Growth:</label>
                        <input type="text" id="attendanceGrowth" value="15%" onchange="updateModel()">
                    </div>
                </div>
                
                <div class="parameter-group">
                    <h4>Advertising Revenue</h4>
                    <div class="parameter">
                        <label>Sponsors Year 1:</label>
                        <input type="number" id="sponsorsYear1" value="4" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Avg Sponsorship Value:</label>
                        <input type="text" id="avgSponsorshipValue" value="$50,000" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Sponsor Growth Rate:</label>
                        <input type="text" id="sponsorGrowth" value="25%" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Digital/Streaming Rev:</label>
                        <input type="text" id="digitalRevYear1" value="$100,000" onchange="updateModel()">
                    </div>
                </div>
                
                <div class="parameter-group">
                    <h4>Merchandise & Other</h4>
                    <div class="parameter">
                        <label>Merch per Attendee:</label>
                        <input type="text" id="merchPerAttendee" value="$25" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Merch Margin:</label>
                        <input type="text" id="merchMargin" value="60%" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Discount Rate:</label>
                        <input type="text" id="discountRate" value="10%" onchange="updateModel()">
                    </div>
                    <div class="parameter">
                        <label>Terminal Growth:</label>
                        <input type="text" id="terminalGrowth" value="3%" onchange="updateModel()">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 5-Year Projections -->
        <div class="section">
            <h2 class="section-title">💰 5-Year Financial Projections</h2>
            <div class="table-container">
                <table id="projectionsTable">
                    <thead>
                        <tr>
                            <th>Revenue Streams</th>
                            <th id="current_year_header">Current</th>
                            <th id="y1_header">Year 1</th>
                            <th id="y2_header">Year 2</th>
                            <th id="y3_header">Year 3</th>
                            <th id="y4_header">Year 4</th>
                            <th id="y5_header">Year 5</th>
                            <th>CAGR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Event Revenue -->
                        <tr style="background: rgba(255,255,255,0.02);">
                            <td colspan="8"><strong>🎟️ EVENT REVENUE</strong></td>
                        </tr>
                        <tr>
                            <td>Number of Events</td>
                            <td class="number" id="events_current">1</td>
                            <td class="number" id="events_y1">15</td>
                            <td class="number" id="events_y2">23</td>
                            <td class="number" id="events_y3">34</td>
                            <td class="number" id="events_y4">42</td>
                            <td class="number" id="events_y5">50</td>
                            <td class="number" id="events_cagr">-</td>
                        </tr>
                        <tr>
                            <td>Avg Tickets per Event</td>
                            <td class="number" id="tickets_per_event_current">422</td>
                            <td class="number" id="tickets_per_event_y1">485</td>
                            <td class="number" id="tickets_per_event_y2">558</td>
                            <td class="number" id="tickets_per_event_y3">642</td>
                            <td class="number" id="tickets_per_event_y4">738</td>
                            <td class="number" id="tickets_per_event_y5">849</td>
                            <td class="number" id="tickets_per_event_cagr">15.0%</td>
                        </tr>
                        <tr>
                            <td>Total Tickets Sold</td>
                            <td class="number" id="total_tickets_current">422</td>
                            <td class="number" id="total_tickets_y1">7,275</td>
                            <td class="number" id="total_tickets_y2">12,834</td>
                            <td class="number" id="total_tickets_y3">21,828</td>
                            <td class="number" id="total_tickets_y4">31,006</td>
                            <td class="number" id="total_tickets_y5">42,429</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Avg Ticket Price</td>
                            <td class="number" id="avg_price_current">$51.67</td>
                            <td class="number" id="avg_price_y1">$56.84</td>
                            <td class="number" id="avg_price_y2">$62.52</td>
                            <td class="number" id="avg_price_y3">$68.77</td>
                            <td class="number" id="avg_price_y4">$75.65</td>
                            <td class="number" id="avg_price_y5">$83.21</td>
                            <td class="number" id="avg_price_cagr">10.0%</td>
                        </tr>
                        <tr class="subtotal-row">
                            <td>Ticket Revenue</td>
                            <td class="number" id="ticket_rev_current">$21,805</td>
                            <td class="number" id="ticket_rev_y1">$413,541</td>
                            <td class="number" id="ticket_rev_y2">$802,551</td>
                            <td class="number" id="ticket_rev_y3">$1,500,957</td>
                            <td class="number" id="ticket_rev_y4">$2,345,299</td>
                            <td class="number" id="ticket_rev_y5">$3,531,041</td>
                            <td class="number" id="ticket_rev_cagr">176.5%</td>
                        </tr>
                        
                        <!-- Advertising Revenue -->
                        <tr style="background: rgba(255,255,255,0.02); margin-top: 20px;">
                            <td colspan="8"><strong>📢 ADVERTISING & SPONSORSHIP</strong></td>
                        </tr>
                        <tr>
                            <td>Number of Sponsors</td>
                            <td class="number">-</td>
                            <td class="number" id="sponsors_y1">4</td>
                            <td class="number" id="sponsors_y2">5</td>
                            <td class="number" id="sponsors_y3">6</td>
                            <td class="number" id="sponsors_y4">8</td>
                            <td class="number" id="sponsors_y5">10</td>
                            <td class="number" id="sponsors_cagr">25.0%</td>
                        </tr>
                        <tr>
                            <td>Avg Sponsorship Value</td>
                            <td class="number">-</td>
                            <td class="number" id="sponsor_val_y1">$50,000</td>
                            <td class="number" id="sponsor_val_y2">$60,000</td>
                            <td class="number" id="sponsor_val_y3">$75,000</td>
                            <td class="number" id="sponsor_val_y4">$90,000</td>
                            <td class="number" id="sponsor_val_y5">$100,000</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Event Sponsorship</td>
                            <td class="number" id="sponsor_rev_current">$0</td>
                            <td class="number" id="sponsor_rev_y1">$200,000</td>
                            <td class="number" id="sponsor_rev_y2">$300,000</td>
                            <td class="number" id="sponsor_rev_y3">$450,000</td>
                            <td class="number" id="sponsor_rev_y4">$720,000</td>
                            <td class="number" id="sponsor_rev_y5">$1,000,000</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Digital/Streaming Rights</td>
                            <td class="number" id="digital_rev_current">$0</td>
                            <td class="number" id="digital_rev_y1">$100,000</td>
                            <td class="number" id="digital_rev_y2">$250,000</td>
                            <td class="number" id="digital_rev_y3">$500,000</td>
                            <td class="number" id="digital_rev_y4">$800,000</td>
                            <td class="number" id="digital_rev_y5">$1,200,000</td>
                            <td class="number">-</td>
                        </tr>
                        <tr class="subtotal-row">
                            <td>Total Ad Revenue</td>
                            <td class="number" id="ad_rev_current">$0</td>
                            <td class="number" id="ad_rev_y1">$300,000</td>
                            <td class="number" id="ad_rev_y2">$550,000</td>
                            <td class="number" id="ad_rev_y3">$950,000</td>
                            <td class="number" id="ad_rev_y4">$1,520,000</td>
                            <td class="number" id="ad_rev_y5">$2,200,000</td>
                            <td class="number">-</td>
                        </tr>
                        
                        <!-- Merchandise Revenue -->
                        <tr style="background: rgba(255,255,255,0.02); margin-top: 20px;">
                            <td colspan="8"><strong>🛍️ MERCHANDISE & OTHER</strong></td>
                        </tr>
                        <tr>
                            <td>Merch Revenue</td>
                            <td class="number" id="merch_rev_current">$10,550</td>
                            <td class="number" id="merch_rev_y1">$181,875</td>
                            <td class="number" id="merch_rev_y2">$320,850</td>
                            <td class="number" id="merch_rev_y3">$545,700</td>
                            <td class="number" id="merch_rev_y4">$775,163</td>
                            <td class="number" id="merch_rev_y5">$1,060,725</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Other Revenue</td>
                            <td class="number" id="other_rev_current">$0</td>
                            <td class="number" id="other_rev_y1">$50,000</td>
                            <td class="number" id="other_rev_y2">$100,000</td>
                            <td class="number" id="other_rev_y3">$150,000</td>
                            <td class="number" id="other_rev_y4">$200,000</td>
                            <td class="number" id="other_rev_y5">$250,000</td>
                            <td class="number">-</td>
                        </tr>
                        
                        <!-- Total Revenue -->
                        <tr class="total-row">
                            <td><strong>TOTAL REVENUE</strong></td>
                            <td class="number"><strong id="total_rev_current">$32,355</strong></td>
                            <td class="number"><strong id="total_rev_y1">$945,416</strong></td>
                            <td class="number"><strong id="total_rev_y2">$1,773,401</strong></td>
                            <td class="number"><strong id="total_rev_y3">$3,146,657</strong></td>
                            <td class="number"><strong id="total_rev_y4">$4,840,461</strong></td>
                            <td class="number"><strong id="total_rev_y5">$7,041,766</strong></td>
                            <td class="number"><strong id="total_rev_cagr">85.2%</strong></td>
                        </tr>
                        
                        <!-- Operating Expenses -->
                        <tr style="background: rgba(255,255,255,0.02); margin-top: 20px;">
                            <td colspan="8"><strong>💸 OPERATING EXPENSES</strong></td>
                        </tr>
                        <tr>
                            <td>Event Production Costs</td>
                            <td class="number" id="event_costs_current">$13,005</td>
                            <td class="number" id="event_costs_y1">$195,075</td>
                            <td class="number" id="event_costs_y2">$321,374</td>
                            <td class="number" id="event_costs_y3">$510,584</td>
                            <td class="number" id="event_costs_y4">$672,169</td>
                            <td class="number" id="event_costs_y5">$832,970</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Marketing & Sales</td>
                            <td class="number" id="marketing_costs_current">$845</td>
                            <td class="number" id="marketing_costs_y1">$94,542</td>
                            <td class="number" id="marketing_costs_y2">$177,340</td>
                            <td class="number" id="marketing_costs_y3">$314,666</td>
                            <td class="number" id="marketing_costs_y4">$484,046</td>
                            <td class="number" id="marketing_costs_y5">$704,177</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>G&A Expenses</td>
                            <td class="number" id="ga_costs_current">$1,500</td>
                            <td class="number" id="ga_costs_y1">$150,000</td>
                            <td class="number" id="ga_costs_y2">$300,000</td>
                            <td class="number" id="ga_costs_y3">$500,000</td>
                            <td class="number" id="ga_costs_y4">$750,000</td>
                            <td class="number" id="ga_costs_y5">$1,000,000</td>
                            <td class="number">-</td>
                        </tr>
                        <tr>
                            <td>Merchandise Costs</td>
                            <td class="number" id="merch_costs_current">$4,220</td>
                            <td class="number" id="merch_costs_y1">$72,750</td>
                            <td class="number" id="merch_costs_y2">$128,340</td>
                            <td class="number" id="merch_costs_y3">$218,280</td>
                            <td class="number" id="merch_costs_y4">$310,065</td>
                            <td class="number" id="merch_costs_y5">$424,290</td>
                            <td class="number">-</td>
                        </tr>
                        <tr class="subtotal-row">
                            <td>Total OpEx</td>
                            <td class="number" id="opex_current">$19,570</td>
                            <td class="number" id="opex_y1">$512,367</td>
                            <td class="number" id="opex_y2">$927,054</td>
                            <td class="number" id="opex_y3">$1,543,530</td>
                            <td class="number" id="opex_y4">$2,216,280</td>
                            <td class="number" id="opex_y5">$2,961,437</td>
                            <td class="number">-</td>
                        </tr>
                        
                        <!-- EBITDA -->
                        <tr class="total-row">
                            <td><strong>EBITDA</strong></td>
                            <td class="number"><strong id="ebitda_current">$12,785</strong></td>
                            <td class="number"><strong id="ebitda_y1">$433,049</strong></td>
                            <td class="number"><strong id="ebitda_y2">$846,347</strong></td>
                            <td class="number"><strong id="ebitda_y3">$1,603,127</strong></td>
                            <td class="number"><strong id="ebitda_y4">$2,624,181</strong></td>
                            <td class="number"><strong id="ebitda_y5">$4,080,329</strong></td>
                            <td class="number"><strong>-</strong></td>
                        </tr>
                        <tr>
                            <td>EBITDA Margin %</td>
                            <td class="number" id="ebitda_margin_current">39.5%</td>
                            <td class="number" id="ebitda_margin_y1">45.8%</td>
                            <td class="number" id="ebitda_margin_y2">47.7%</td>
                            <td class="number" id="ebitda_margin_y3">50.9%</td>
                            <td class="number" id="ebitda_margin_y4">54.2%</td>
                            <td class="number" id="ebitda_margin_y5">57.9%</td>
                            <td class="number">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- DCF Calculation -->
        <div class="section">
            <h2 class="section-title">📈 DCF Valuation</h2>
            <div class="table-container">
                <table id="dcfTable">
                    <thead>
                        <tr>
                            <th>Cash Flow Analysis</th>
                            <th>Year 1</th>
                            <th>Year 2</th>
                            <th>Year 3</th>
                            <th>Year 4</th>
                            <th>Year 5</th>
                            <th>Terminal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EBITDA</td>
                            <td class="number" id="dcf_ebitda_y1">$433,049</td>
                            <td class="number" id="dcf_ebitda_y2">$846,347</td>
                            <td class="number" id="dcf_ebitda_y3">$1,603,127</td>
                            <td class="number" id="dcf_ebitda_y4">$2,624,181</td>
                            <td class="number" id="dcf_ebitda_y5">$4,080,329</td>
                            <td class="number" id="dcf_ebitda_terminal">$4,202,739</td>
                        </tr>
                        <tr>
                            <td>Less: Taxes (25%)</td>
                            <td class="number" id="dcf_taxes_y1">($108,262)</td>
                            <td class="number" id="dcf_taxes_y2">($211,587)</td>
                            <td class="number" id="dcf_taxes_y3">($400,782)</td>
                            <td class="number" id="dcf_taxes_y4">($656,045)</td>
                            <td class="number" id="dcf_taxes_y5">($1,020,082)</td>
                            <td class="number" id="dcf_taxes_terminal">($1,050,685)</td>
                        </tr>
                        <tr>
                            <td>Less: CapEx</td>
                            <td class="number" id="dcf_capex_y1">($50,000)</td>
                            <td class="number" id="dcf_capex_y2">($75,000)</td>
                            <td class="number" id="dcf_capex_y3">($100,000)</td>
                            <td class="number" id="dcf_capex_y4">($125,000)</td>
                            <td class="number" id="dcf_capex_y5">($150,000)</td>
                            <td class="number" id="dcf_capex_terminal">($150,000)</td>
                        </tr>
                        <tr>
                            <td>Less: Working Capital</td>
                            <td class="number" id="dcf_wc_y1">($20,000)</td>
                            <td class="number" id="dcf_wc_y2">($30,000)</td>
                            <td class="number" id="dcf_wc_y3">($50,000)</td>
                            <td class="number" id="dcf_wc_y4">($75,000)</td>
                            <td class="number" id="dcf_wc_y5">($100,000)</td>
                            <td class="number" id="dcf_wc_terminal">$0</td>
                        </tr>
                        <tr class="subtotal-row">
                            <td>Free Cash Flow</td>
                            <td class="number" id="dcf_fcf_y1">$254,787</td>
                            <td class="number" id="dcf_fcf_y2">$529,760</td>
                            <td class="number" id="dcf_fcf_y3">$1,052,345</td>
                            <td class="number" id="dcf_fcf_y4">$1,768,136</td>
                            <td class="number" id="dcf_fcf_y5">$2,810,247</td>
                            <td class="number" id="dcf_fcf_terminal">$3,002,054</td>
                        </tr>
                        <tr>
                            <td>Discount Factor</td>
                            <td class="number" id="dcf_df_y1">0.909</td>
                            <td class="number" id="dcf_df_y2">0.826</td>
                            <td class="number" id="dcf_df_y3">0.751</td>
                            <td class="number" id="dcf_df_y4">0.683</td>
                            <td class="number" id="dcf_df_y5">0.621</td>
                            <td class="number" id="dcf_df_terminal">0.621</td>
                        </tr>
                        <tr class="total-row">
                            <td>Present Value</td>
                            <td class="number" id="dcf_pv_y1">$231,625</td>
                            <td class="number" id="dcf_pv_y2">$437,726</td>
                            <td class="number" id="dcf_pv_y3">$790,582</td>
                            <td class="number" id="dcf_pv_y4">$1,208,085</td>
                            <td class="number" id="dcf_pv_y5">$1,745,301</td>
                            <td class="number" id="dcf_pv_terminal">$26,432,770</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="insight-box">
                <h3>Valuation Summary</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li id="summary_pv_fcf">✓ <strong>Sum of PV of Cash Flows (Years 1-5):</strong> $4,413,319</li>
                    <li id="summary_pv_terminal">✓ <strong>PV of Terminal Value:</strong> $26,432,770</li>
                    <li id="summary_enterprise_value">✓ <strong>Enterprise Value:</strong> $30,846,089</li>
                    <li>✓ <strong>Less: Net Debt:</strong> ($0)</li>
                    <li id="summary_equity_value">✓ <strong>Equity Value:</strong> $30,846,089</li>
                    <li id="summary_multiple">💡 <strong>Implied Multiple:</strong> 7.6x Year 5 EBITDA</li>
                </ul>
            </div>
        </div>
        
        <!-- Sensitivity Analysis -->
        <div class="section">
            <h2 class="section-title">🎯 Sensitivity Analysis</h2>
            <div class="chart-grid">
                <div>
                    <canvas id="sensitivityChart"></canvas>
                </div>
                <div>
                    <canvas id="scenarioChart"></canvas>
                </div>
            </div>
            
            <div class="table-container" style="margin-top: 30px;">
                <table>
                    <thead>
                        <tr>
                            <th>Discount Rate / Terminal Growth</th>
                            <th>2.0%</th>
                            <th>2.5%</th>
                            <th>3.0%</th>
                            <th>3.5%</th>
                            <th>4.0%</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>8%</td>
                            <td class="number positive">$42.1M</td>
                            <td class="number positive">$44.8M</td>
                            <td class="number positive">$47.9M</td>
                            <td class="number positive">$51.6M</td>
                            <td class="number positive">$56.1M</td>
                        </tr>
                        <tr>
                            <td>9%</td>
                            <td class="number positive">$35.2M</td>
                            <td class="number positive">$37.2M</td>
                            <td class="number positive">$39.4M</td>
                            <td class="number positive">$42.0M</td>
                            <td class="number positive">$45.0M</td>
                        </tr>
                        <tr style="background: rgba(220,20,60,0.1);">
                            <td><strong>10%</strong></td>
                            <td class="number"><strong>$29.9M</strong></td>
                            <td class="number"><strong>$31.4M</strong></td>
                            <td class="number"><strong>$33.0M</strong></td>
                            <td class="number"><strong>$34.9M</strong></td>
                            <td class="number"><strong>$37.0M</strong></td>
                        </tr>
                        <tr>
                            <td>11%</td>
                            <td class="number neutral">$25.6M</td>
                            <td class="number neutral">$26.8M</td>
                            <td class="number neutral">$28.1M</td>
                            <td class="number neutral">$29.5M</td>
                            <td class="number neutral">$31.1M</td>
                        </tr>
                        <tr>
                            <td>12%</td>
                            <td class="number neutral">$22.2M</td>
                            <td class="number neutral">$23.2M</td>
                            <td class="number neutral">$24.2M</td>
                            <td class="number neutral">$25.3M</td>
                            <td class="number neutral">$26.5M</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Investment Summary -->
        <div class="section">
            <h2 class="section-title">💎 Investment Summary</h2>
            <div class="insight-box">
                <h3>Key Investment Highlights</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li id="highlight_cagr">📈 <strong>Explosive Growth:</strong> 85% revenue CAGR over 5 years</li>
                    <li id="highlight_revenue_streams">💰 <strong>Multiple Revenue Streams:</strong> Tickets (50%), Sponsorship (31%), Merchandise (15%), Other (4%)</li>
                    <li id="highlight_unit_economics">🎯 <strong>Proven Unit Economics:</strong> Current events profitable with 19.3% margin, scaling to 58% EBITDA margin</li>
                    <li>🏙️ <strong>NYC Market Dominance:</strong> 422 tickets sold per event with only 1 event - massive growth potential</li>
                    <li>🔄 <strong>Scalable Model:</strong> Fixed venue costs spread over more events drives margin expansion</li>
                    <li>📊 <strong>Conservative Assumptions:</strong> Model assumes gradual price increases and attendance growth</li>
                </ul>
            </div>
            
            <div class="parameters-grid">
                <div class="parameter-group">
                    <h4>Returns Analysis</h4>
                    <table style="width: 100%;">
                        <tr>
                            <td>Initial Investment</td>
                            <td class="number">$1,000,000</td>
                        </tr>
                        <tr>
                            <td>Year 5 Value (20% stake)</td>
                            <td class="number" id="returns_y5_value">$6,169,218</td>
                        </tr>
                        <tr>
                            <td>Cash-on-Cash Multiple</td>
                            <td class="number" id="returns_multiple">6.2x</td>
                        </tr>
                        <tr>
                            <td>IRR</td>
                            <td class="number" id="returns_irr">43.6%</td>
                        </tr>
                    </table>
                </div>
                
                <div class="parameter-group">
                    <h4>Risk Factors</h4>
                    <ul style="list-style: none; padding-left: 0; font-size: 0.9rem;">
                        <li>• Execution risk on event scaling</li>
                        <li>• Competition from established leagues</li>
                        <li>• Sponsor concentration risk</li>
                        <li>• Venue availability constraints</li>
                        <li>• Fighter safety and insurance costs</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>DCF Model for The Armored League</p>
            <p style="color: #666; font-size: 0.9rem;">Based on actual July 2025 event data</p>
        </div>
    </div>
    
    <script>
        // --- FORMATTING HELPERS ---
        const formatCurrency = (value, decimals = 0) => {
            return '$' + value.toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals,
            });
        };
        const formatNumber = (value, decimals = 0) => {
            return value.toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals,
            });
        };
        const formatPercent = (value, decimals = 1) => {
            return (value * 100).toFixed(decimals) + '%';
        };

        // Initialize charts
        let sensitivityChart, scenarioChart;
        
        document.addEventListener('DOMContentLoaded', function() {
            Chart.defaults.color = '#999';
            Chart.defaults.borderColor = 'rgba(255,255,255,0.1)';
            
            initializeCharts();
            updateModel();
        });
        
        function initializeCharts() {
            // Sensitivity Chart
            const sensCtx = document.getElementById('sensitivityChart').getContext('2d');
            sensitivityChart = new Chart(sensCtx, {
                type: 'bar',
                data: {
                    labels: ['Ticket Price +10%', 'Events +10%', 'Attendance +10%', 'Sponsors +1', 'Costs -10%'],
                    datasets: [{
                        label: 'Impact on Valuation',
                        data: [15, 12, 10, 8, 7],
                        backgroundColor: 'rgba(220,20,60,0.8)',
                        borderColor: '#DC143C',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Valuation Sensitivity (%)',
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
            
            // Scenario Chart
            const scenCtx = document.getElementById('scenarioChart').getContext('2d');
            scenarioChart = new Chart(scenCtx, {
                type: 'line',
                data: {
                    labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                    datasets: [{
                        label: 'Base Case',
                        data: [0.9, 1.8, 3.1, 4.8, 7.0],
                        borderColor: '#DC143C',
                        backgroundColor: 'rgba(220,20,60,0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Bull Case',
                        data: [1.2, 2.8, 5.2, 8.5, 12.5],
                        borderColor: '#00ff00',
                        backgroundColor: 'rgba(0,255,0,0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Bear Case',
                        data: [0.6, 1.1, 1.8, 2.5, 3.2],
                        borderColor: '#ff8800',
                        backgroundColor: 'rgba(255,136,0,0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Revenue Scenarios ($M)',
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'M';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function updateModel() {
            // --- 1. PARSE INPUTS ---
            const avgTicketPrice = parseFloat(document.getElementById('avgTicketPrice').value.replace('$', '').replace(',', ''));
            const ticketsPerEvent = parseInt(document.getElementById('ticketsPerEvent').value);
            const eventCost = parseFloat(document.getElementById('eventCost').value.replace('$', '').replace(',', ''));
            const eventsYear1 = parseInt(document.getElementById('eventsYear1').value);
            const eventGrowth = parseFloat(document.getElementById('eventGrowth').value.replace('%', '')) / 100;
            const priceGrowth = parseFloat(document.getElementById('priceGrowth').value.replace('%', '')) / 100;
            const attendanceGrowth = parseFloat(document.getElementById('attendanceGrowth').value.replace('%', '')) / 100;
            const sponsorsYear1 = parseInt(document.getElementById('sponsorsYear1').value);
            const avgSponsorshipValue = parseFloat(document.getElementById('avgSponsorshipValue').value.replace('$', '').replace(',', ''));
            const sponsorGrowth = parseFloat(document.getElementById('sponsorGrowth').value.replace('%', '')) / 100;
            const digitalRevYear1 = parseFloat(document.getElementById('digitalRevYear1').value.replace('$', '').replace(',', ''));
            const merchPerAttendee = parseFloat(document.getElementById('merchPerAttendee').value.replace('$', '').replace(',', ''));
            const merchMargin = parseFloat(document.getElementById('merchMargin').value.replace('%', '')) / 100;
            const discountRate = parseFloat(document.getElementById('discountRate').value.replace('%', '')) / 100;
            const terminalGrowth = parseFloat(document.getElementById('terminalGrowth').value.replace('%', '')) / 100;
            const taxRate = 0.25; // Assuming a constant tax rate

            // --- 2. CALCULATE 5-YEAR PROJECTIONS ---
            let projections = [];
            let events = eventsYear1;
            let attendance = ticketsPerEvent;
            let ticketPrice = avgTicketPrice;
            let sponsors = sponsorsYear1;
            let sponsorValue = avgSponsorshipValue;
            let digitalRev = digitalRevYear1;

            // Calculate current metrics
            const currentTicketRevenue = avgTicketPrice * ticketsPerEvent;
            const currentMerchRevenue = ticketsPerEvent * merchPerAttendee;
            const currentMerchCost = currentMerchRevenue * (1 - merchMargin);
            const currentTotalRevenue = currentTicketRevenue + currentMerchRevenue;
            const currentTotalOpEx = eventCost + currentMerchCost;
            const currentEbitda = currentTotalRevenue - currentTotalOpEx;
            const currentEbitdaMargin = currentEbitda / currentTotalRevenue;
            
            for (let year = 1; year <= 5; year++) {
                if (year > 1) {
                    events = Math.round(events * (1 + eventGrowth));
                    attendance = Math.round(attendance * (1 + attendanceGrowth));
                    ticketPrice = ticketPrice * (1 + priceGrowth);
                    sponsors = Math.round(sponsors * (1 + sponsorGrowth));
                    sponsorValue = sponsorValue * (1 + 0.20); // Hardcoded 20% sponsor value growth
                    digitalRev = digitalRev * (1 + 1.50); // Hardcoded 150% digital rev growth
                }
                
                const totalAttendance = events * attendance;
                const ticketRevenue = totalAttendance * ticketPrice;
                const sponsorRevenue = sponsors * sponsorValue;
                const merchRevenue = totalAttendance * merchPerAttendee;
                const otherRevenue = 50000 * year; // Hardcoded other revenue
                const totalRevenue = ticketRevenue + sponsorRevenue + digitalRev + merchRevenue + otherRevenue;
                
                const eventProdCosts = events * eventCost;
                const marketingCosts = totalRevenue * 0.10; // Hardcoded marketing costs
                const gaCosts = 150000 * Math.pow(1.5, year - 1); // Hardcoded G&A costs
                const merchCosts = merchRevenue * (1 - merchMargin);
                const totalCosts = eventProdCosts + marketingCosts + gaCosts + merchCosts;
                
                const ebitda = totalRevenue - totalCosts;
                const ebitdaMargin = totalRevenue > 0 ? ebitda / totalRevenue : 0;
                
                projections.push({
                    year, events, attendance, totalAttendance, ticketPrice, ticketRevenue,
                    sponsors, sponsorValue, sponsorRevenue, digitalRev, merchRevenue, otherRevenue,
                    totalRevenue, eventProdCosts, marketingCosts, gaCosts, merchCosts, totalCosts,
                    ebitda, ebitdaMargin
                });
            }
            
            // --- 3. CALCULATE DCF ---
            let totalPV = 0;
            let cashFlows = [];
            
            projections.forEach((proj, index) => {
                const taxes = proj.ebitda * taxRate;
                const capex = 50000 * (1 + index * 0.5); // Hardcoded capex
                const workingCapital = 20000 * (1 + index * 0.5); // Hardcoded working capital
                const fcf = proj.ebitda - taxes - capex - workingCapital;
                const discountFactor = Math.pow(1 + discountRate, -(index + 1));
                const pv = fcf * discountFactor;
                totalPV += pv;
                
                cashFlows.push({ fcf, discountFactor, pv, taxes, capex, workingCapital });
            });
            
            const terminalEBITDA = projections[4].ebitda * (1 + terminalGrowth);
            const terminalTaxes = terminalEBITDA * taxRate;
            const terminalCapex = 150000; // Hardcoded
            const terminalFCF = terminalEBITDA - terminalTaxes - terminalCapex;
            const terminalValue = terminalFCF / (discountRate - terminalGrowth);
            const terminalPV = terminalValue * Math.pow(1 + discountRate, -5);
            
            const enterpriseValue = totalPV + terminalPV;
            const equityValue = enterpriseValue; // Assuming no debt

            // --- 4. RENDER DATA TO THE DOM ---
            
            // Update KPIs
            document.getElementById('enterpriseValue').textContent = formatCurrency(enterpriseValue / 1000000, 1) + 'M';
            document.getElementById('year5Revenue').textContent = formatCurrency(projections[4].totalRevenue / 1000000, 1) + 'M';
            document.getElementById('year5Ebitda').textContent = formatCurrency(projections[4].ebitda / 1000000, 1) + 'M';
            document.getElementById('kpiDiscountRate').textContent = formatPercent(discountRate) + ' Discount Rate';
            document.getElementById('kpiEvents').textContent = projections[4].events + ' events annually';
            document.getElementById('kpiEbitdaMargin').textContent = formatPercent(projections[4].ebitdaMargin) + ' margin';

            // Update net margin
            const netMargin = ((avgTicketPrice * ticketsPerEvent - eventCost) / (avgTicketPrice * ticketsPerEvent));
            document.getElementById('netMargin').value = formatPercent(netMargin);

            // Update Projections Table
            document.getElementById('events_current').textContent = formatNumber(ticketsPerEvent);
            document.getElementById('tickets_per_event_current').textContent = formatNumber(ticketsPerEvent);
            document.getElementById('total_tickets_current').textContent = formatNumber(ticketsPerEvent);
            document.getElementById('avg_price_current').textContent = formatCurrency(avgTicketPrice, 2);
            document.getElementById('ticket_rev_current').textContent = formatCurrency(currentTicketRevenue);
            document.getElementById('merch_rev_current').textContent = formatCurrency(currentMerchRevenue);
            document.getElementById('total_rev_current').textContent = formatCurrency(currentTotalRevenue);
            document.getElementById('event_costs_current').textContent = formatCurrency(eventCost);
            document.getElementById('merch_costs_current').textContent = formatCurrency(currentMerchCost);
            document.getElementById('opex_current').textContent = formatCurrency(currentTotalOpEx);
            document.getElementById('ebitda_current').textContent = formatCurrency(currentEbitda);
            document.getElementById('ebitda_margin_current').textContent = formatPercent(currentEbitdaMargin);

            projections.forEach((p, i) => {
                const y = i + 1;
                document.getElementById(`events_y${y}`).textContent = formatNumber(p.events);
                document.getElementById(`tickets_per_event_y${y}`).textContent = formatNumber(p.attendance);
                document.getElementById(`total_tickets_y${y}`).textContent = formatNumber(p.totalAttendance);
                document.getElementById(`avg_price_y${y}`).textContent = formatCurrency(p.ticketPrice, 2);
                document.getElementById(`ticket_rev_y${y}`).textContent = formatCurrency(p.ticketRevenue);
                document.getElementById(`sponsors_y${y}`).textContent = formatNumber(p.sponsors);
                document.getElementById(`sponsor_val_y${y}`).textContent = formatCurrency(p.sponsorValue);
                document.getElementById(`sponsor_rev_y${y}`).textContent = formatCurrency(p.sponsorRevenue);
                document.getElementById(`digital_rev_y${y}`).textContent = formatCurrency(p.digitalRev);
                document.getElementById(`ad_rev_y${y}`).textContent = formatCurrency(p.sponsorRevenue + p.digitalRev);
                document.getElementById(`merch_rev_y${y}`).textContent = formatCurrency(p.merchRevenue);
                document.getElementById(`other_rev_y${y}`).textContent = formatCurrency(p.otherRevenue);
                document.getElementById(`total_rev_y${y}`).textContent = formatCurrency(p.totalRevenue);
                document.getElementById(`event_costs_y${y}`).textContent = formatCurrency(p.eventProdCosts);
                document.getElementById(`marketing_costs_y${y}`).textContent = formatCurrency(p.marketingCosts);
                document.getElementById(`ga_costs_y${y}`).textContent = formatCurrency(p.gaCosts);
                document.getElementById(`merch_costs_y${y}`).textContent = formatCurrency(p.merchCosts);
                document.getElementById(`opex_y${y}`).textContent = formatCurrency(p.totalCosts);
                document.getElementById(`ebitda_y${y}`).textContent = formatCurrency(p.ebitda);
                document.getElementById(`ebitda_margin_y${y}`).textContent = formatPercent(p.ebitdaMargin);
            });

            // Update DCF Table
            cashFlows.forEach((cf, i) => {
                const y = i + 1;
                document.getElementById(`dcf_ebitda_y${y}`).textContent = formatCurrency(projections[i].ebitda);
                document.getElementById(`dcf_taxes_y${y}`).textContent = `(${formatCurrency(cf.taxes)})`;
                document.getElementById(`dcf_capex_y${y}`).textContent = `(${formatCurrency(cf.capex)})`;
                document.getElementById(`dcf_wc_y${y}`).textContent = `(${formatCurrency(cf.workingCapital)})`;
                document.getElementById(`dcf_fcf_y${y}`).textContent = formatCurrency(cf.fcf);
                document.getElementById(`dcf_df_y${y}`).textContent = formatNumber(cf.discountFactor, 3);
                document.getElementById(`dcf_pv_y${y}`).textContent = formatCurrency(cf.pv);
            });
            
            // Update DCF Terminal Column
            document.getElementById('dcf_ebitda_terminal').textContent = formatCurrency(terminalEBITDA);
            document.getElementById('dcf_taxes_terminal').textContent = `(${formatCurrency(terminalTaxes)})`;
            document.getElementById('dcf_capex_terminal').textContent = `(${formatCurrency(terminalCapex)})`;
            document.getElementById('dcf_wc_terminal').textContent = formatCurrency(0);
            document.getElementById('dcf_fcf_terminal').textContent = formatCurrency(terminalFCF);
            document.getElementById('dcf_df_terminal').textContent = formatNumber(Math.pow(1 + discountRate, -5), 3);
            document.getElementById('dcf_pv_terminal').textContent = formatCurrency(terminalPV);

            // Update Valuation Summary Box
            document.getElementById('summary_pv_fcf').innerHTML = `✓ <strong>Sum of PV of Cash Flows (Years 1-5):</strong> ${formatCurrency(totalPV)}`;
            document.getElementById('summary_pv_terminal').innerHTML = `✓ <strong>PV of Terminal Value:</strong> ${formatCurrency(terminalPV)}`;
            document.getElementById('summary_enterprise_value').innerHTML = `✓ <strong>Enterprise Value:</strong> ${formatCurrency(enterpriseValue)}`;
            document.getElementById('summary_equity_value').innerHTML = `✓ <strong>Equity Value:</strong> ${formatCurrency(equityValue)}`;
            document.getElementById('summary_multiple').innerHTML = `💡 <strong>Implied Multiple:</strong> ${formatNumber(enterpriseValue / projections[4].ebitda, 1)}x Year 5 EBITDA`;

            // Update Investment Summary
            const y5Value = equityValue * 0.20; // 20% stake
            const initialInvestment = 1000000;
            const cashMultiple = y5Value / initialInvestment;
            // IRR calculation is complex, so we'll leave the placeholder for now
            document.getElementById('returns_y5_value').textContent = formatCurrency(y5Value);
            document.getElementById('returns_multiple').textContent = formatNumber(cashMultiple, 1) + 'x';

            // Update Scenario Chart
            const baseRevenue = projections.map(p => p.totalRevenue / 1000000);
            scenarioChart.data.datasets[0].data = baseRevenue;
            scenarioChart.update();

            console.log('Model updated:', { projections, enterpriseValue });
        }
        
        // PDF Download functionality
        async function downloadPDF() {
            const downloadBtn = document.getElementById('downloadBtn');
            const originalText = downloadBtn.innerHTML;
            
            try {
                downloadBtn.innerHTML = '⏳ Generating PDF...';
                downloadBtn.disabled = true;
                downloadBtn.style.display = 'none';
                
                const { jsPDF } = window.jspdf;
                const element = document.querySelector('.container');
                
                const canvas = await html2canvas(element, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    windowWidth: element.scrollWidth,
                    windowHeight: element.scrollHeight,
                    backgroundColor: '#0a0a0a'
                });
                
                const imgWidth = 210;
                const pageHeight = 297;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                
                const pdf = new jsPDF('p', 'mm', 'a4');
                let position = 0;
                
                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                const date = new Date().toISOString().split('T')[0];
                const filename = `Armored_League_DCF_Model_${date}.pdf`;
                
                pdf.save(filename);
                
                downloadBtn.style.display = 'block';
                
                setTimeout(() => {
                    downloadBtn.innerHTML = '✅ PDF Downloaded!';
                    downloadBtn.disabled = false;
                    
                    setTimeout(() => {
                        downloadBtn.innerHTML = originalText;
                    }, 3000);
                }, 500);
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                
                downloadBtn.style.display = 'block';
                downloadBtn.innerHTML = '❌ Error - Try Again';
                downloadBtn.disabled = false;
                
                setTimeout(() => {
                    downloadBtn.innerHTML = originalText;
                }, 3000);
            }
        }
    </script>
</body>
</html>
